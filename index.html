<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UGS Files</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #2e3244, #36224b);
    color: white;
    display: flex;
    min-height: 100vh;
}

/* Sidebar */
.sidebar {
    position: fixed;
    left: 0;
    top: 0;
    width: 70px;
    height: 100vh;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(10px);
    padding: 8px 5px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    overflow-y: auto;
    z-index: 1000;
}

.sidebar-btn {
    background: #5986da;
    border: none;
    color: white;
    padding: 8px 0;
    font-size: 13px;
    font-weight: bold;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.15s;
}

.sidebar-btn:hover {
    background: #79aadb;
}

/* Main */
.main {
    margin-left: 80px;
    padding: 40px;
    width: 100%;
}

.header {
    text-align: center;
    margin-bottom: 35px;
}

.search-box {
    display: flex;
    justify-content: center;
    margin-bottom: 35px;
}

#search {
    width: 100%;
    max-width: 520px;
    padding: 12px 20px;
    border-radius: 25px;
    border: none;
    background: rgba(255,255,255,0.12);
    color: white;
    font-size: 16px;
    outline: none;
}

/* Sections */
.letter-section {
    margin-bottom: 55px;
}

.letter-header {
    font-size: 30px;
    color: #79aadb;
    border-bottom: 2px solid rgba(255,255,255,0.2);
    margin-bottom: 18px;
}

.game-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
}

.game-card {
    background: rgba(255,255,255,0.07);
    padding: 14px;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: 0.15s ease;
    border: 1px solid transparent;
}

.game-card:hover {
    background: #5986da;
    border-color: #79aadb;
    transform: scale(1.03);
}
</style>
</head>

<body>

<div class="sidebar" id="sidebar"></div>

<div class="main">
    <div class="header">
        <h1>UGS Files</h1>
        <p>Direct Live Injection (No Blob Links)</p>
    </div>

    <div class="search-box">
        <input id="search" placeholder="Search games..." onkeyup="searchGames()">
    </div>

    <div id="game-container">Loading...</div>
</div>

<script>
const games = [
    "1", "10 Bullets", "10 Minutes Til Dawn", "12 Mini Battles",
    "2048", "8 Ball Pool", "Among Us", "Bad Ice Cream",
    "Basketball Stars", "Bitlife", "Bloons TD6", "Bloxorz",
    "Celeste", "Chess", "Cookie Clicker", "Crossy Road",
    "Cut The Rope"
];

/* OPEN GAME (NO BLOBS) */
function openCloaked(url) {
    const win = window.open("about:blank");
    if (!win) return;

    win.document.open();
    win.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
        <title>UGS Game</title>
        <style>
            html,body { margin:0; height:100%; background:black; }
            iframe { width:100%; height:100%; border:none; }
        </style>
        </head>
        <body>
            <iframe src="${url}" allowfullscreen></iframe>
        </body>
        </html>
    `);
    win.document.close();
}

const container = document.getElementById("game-container");
const sidebar = document.getElementById("sidebar");

function normalize(name) {
    return name.toLowerCase().replace(/[^a-z0-9]/g, "");
}

function init() {
    container.innerHTML = "";
    sidebar.innerHTML = "";

    const grouped = {};

    games.forEach(game => {
        let letter = game[0].toUpperCase();
        if (!/[A-Z]/.test(letter)) letter = "#";
        if (!grouped[letter]) grouped[letter] = [];
        grouped[letter].push(game);
    });

    Object.keys(grouped).sort().forEach(letter => {
        const btn = document.createElement("button");
        btn.className = "sidebar-btn";
        btn.textContent = letter;
        btn.onclick = () =>
            document.getElementById("sec-" + letter)
            .scrollIntoView({ behavior: "smooth" });
        sidebar.appendChild(btn);

        const section = document.createElement("div");
        section.className = "letter-section";
        section.id = "sec-" + letter;

        section.innerHTML = `<div class="letter-header">${letter}</div>`;
        const grid = document.createElement("div");
        grid.className = "game-grid";

        grouped[letter].forEach(game => {
            const card = document.createElement("div");
            card.className = "game-card";
            card.textContent = game;

            const file = normalize(game);
            const url =
              `https://cdn.jsdelivr.net/gh/jamesbrownedu/dt-jamesbrown22@main/UGS-Files/cl${file}.html`;

            card.onclick = () => openCloaked(url);
            grid.appendChild(card);
        });

        section.appendChild(grid);
        container.appendChild(section);
    });
}

function searchGames() {
    const q = search.value.toLowerCase();
    document.querySelectorAll(".letter-section").forEach(sec => {
        let show = false;
        sec.querySelectorAll(".game-card").forEach(card => {
            const match = card.textContent.toLowerCase().includes(q);
            card.style.display = match ? "block" : "none";
            if (match) show = true;
        });
        sec.style.display = show ? "block" : "none";
    });
}

init();
</script>

</body>
</html>
